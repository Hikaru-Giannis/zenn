---
title: "on句とwhere句の条件指定の違い"
emoji: "🦁"
type: "tech"
topics: []
published: false
---

## はじめに
データベースを利用する際、結合して条件指定することがあります。
条件指定には、WHERE句とON句のどちらかを利用することが可能です。
この記事内ではMySQLを利用し、例としてメディアサイトを想定し、次のテーブル構成で説明します。

MySQLバージョン: Ver 14.14

````sql
CREATE TABLE category (
  category_id int(11) NOT NULL,
  name varchar(14) NOT NULL,
  from_date datetime,
  to_date datetime,
  PRIMARY KEY (category_id)
);
````

````sql
CREATE TABLE article (
  article_id int(11) NOT NULL,
  category_id int(11) NOT NULL,
  title varchar(14) NOT NULL,
  body text NOT NULL,
  published_at datetime,
  PRIMARY KEY (category_id),
  CONSTRAINT category_ibfk_1 FOREIGN KEY (category_id) REFERENCES category (category_id) ON DELETE CASCADE
);
````

## 結合条件の指定
カテゴリー別で2023年に公開された全ての記事を取得することになりました。
次の2つのクエリで取得可能です。

````sql
SELECT c.name, a.title, a.body
FROM category c
JOIN article a ON c.category_id = a.category_id
WHERE YEAR(a.published_at) = 2023;
````

````sql
SELECT c.name, a.title, a.body
FROM category c
JOIN article a ON c.category_id = a.category_id
AND YEAR(a.published_at) = 2023;
````

// TODO 実際のクエリ提示を提示して違いを説明

## 実行順序の違い
// TODO どのような違いがあるかを説明

## 外部結合の動作の違い
// TODO クエリ文とクエリ結果の違いと理由を説明

## まとめ
// どちらを利用するべきかのケースや注意を提示
